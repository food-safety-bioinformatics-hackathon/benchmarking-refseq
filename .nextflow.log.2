Jun-17 17:18:15.487 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf --sim 2
Jun-17 17:18:15.581 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 19.04.1
Jun-17 17:18:15.591 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [elegant_miescher] - revision: 387fa0fcb0
Jun-17 17:18:15.605 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/nextflow.config
Jun-17 17:18:15.606 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/nextflow.config
Jun-17 17:18:15.628 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Jun-17 17:18:15.951 [main] DEBUG nextflow.Session - Session uuid: fdcdb541-e560-4517-a98b-816d87362d05
Jun-17 17:18:15.951 [main] DEBUG nextflow.Session - Run name: elegant_miescher
Jun-17 17:18:15.952 [main] DEBUG nextflow.Session - Executor pool size: 8
Jun-17 17:18:15.995 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 19.04.1 build 5072
  Modified: 03-05-2019 12:29 UTC (13:29 BST)
  System: Linux 4.15.0-51-generic
  Runtime: Groovy 2.5.6 on OpenJDK 64-Bit Server VM 11.0.1+13-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 1889@n114312.nbi.ac.uk [127.0.1.1]
  CPUs: 8 - Mem: 15.5 GB (5.9 GB) - Swap: 91 MB (91 MB)
Jun-17 17:18:16.022 [main] DEBUG nextflow.Session - Work-dir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work [ext2/ext3]
Jun-17 17:18:16.129 [main] DEBUG nextflow.Session - Session start invoked
Jun-17 17:18:16.133 [main] DEBUG nextflow.processor.TaskDispatcher - Dispatcher > start
Jun-17 17:18:16.135 [main] DEBUG nextflow.script.ScriptRunner - > Script parsing
Jun-17 17:18:16.321 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Jun-17 17:18:16.347 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: /media/deolivl/QIB_deolivl/bigdata/noplasmids/; pattern: *.gz; options: [:]
Jun-17 17:18:16.464 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:18:16.465 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:18:16.469 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:18:16.471 [main] INFO  nextflow.executor.Executor - [warm up] executor > local
Jun-17 17:18:16.474 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=8; memory=15.5 GB; capacity=8; pollInterval=100ms; dumpInterval=5m
Jun-17 17:18:16.477 [main] DEBUG nextflow.processor.TaskDispatcher - Starting monitor: LocalPollingMonitor
Jun-17 17:18:16.478 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Jun-17 17:18:16.479 [main] DEBUG nextflow.executor.Executor - Invoke register for executor: local
Jun-17 17:18:16.518 [main] DEBUG nextflow.Session - >>> barrier register (process: simulation)
Jun-17 17:18:16.526 [main] DEBUG nextflow.processor.TaskProcessor - Creating *combiner* operator for each param(s) at index(es): [1]
Jun-17 17:18:16.540 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > simulation -- maxForks: 8
Jun-17 17:18:16.569 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:18:16.569 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:18:16.569 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:18:16.570 [main] DEBUG nextflow.Session - >>> barrier register (process: refseq_masher_reads)
Jun-17 17:18:16.570 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > refseq_masher_reads -- maxForks: 8
Jun-17 17:18:16.578 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:18:16.579 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:18:16.580 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:18:16.581 [main] DEBUG nextflow.Session - >>> barrier register (process: find_GCF)
Jun-17 17:18:16.582 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > find_GCF -- maxForks: 8
Jun-17 17:18:16.594 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:18:16.594 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:18:16.594 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:18:16.595 [main] DEBUG nextflow.Session - >>> barrier register (process: get_coverage)
Jun-17 17:18:16.606 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > get_coverage -- maxForks: 8
Jun-17 17:18:16.609 [main] DEBUG nextflow.script.ScriptRunner - > Await termination 
Jun-17 17:18:16.609 [main] DEBUG nextflow.Session - Session await
Jun-17 17:18:16.773 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:16.780 [Task submitter] INFO  nextflow.Session - [57/e95ffc] Submitted process > simulation (1004)
Jun-17 17:18:16.802 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:16.803 [Task submitter] INFO  nextflow.Session - [e6/ffd22e] Submitted process > simulation (1005)
Jun-17 17:18:17.349 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: simulation (1005); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/e6/ffd22e0bbb9fb49086eb26d53c6f04]
Jun-17 17:18:17.368 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:17.369 [Task submitter] INFO  nextflow.Session - [a1/58adde] Submitted process > refseq_masher_reads (1)
Jun-17 17:18:17.445 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 2; name: simulation (1004); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/57/e95ffc34c4dd47b93cf96d20b21ab5]
Jun-17 17:18:17.455 [Actor Thread 2] DEBUG nextflow.Session - <<< barrier arrive (process: simulation)
Jun-17 17:18:17.457 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:17.457 [Task submitter] INFO  nextflow.Session - [99/c9bc3f] Submitted process > refseq_masher_reads (2)
Jun-17 17:18:50.384 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 4; name: refseq_masher_reads (2); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/99/c9bc3f73d2a21d78fa306b25adaf0c]
Jun-17 17:18:50.393 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:50.393 [Task submitter] INFO  nextflow.Session - [48/8649d0] Submitted process > find_GCF (1)
Jun-17 17:18:50.407 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 3; name: refseq_masher_reads (1); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/a1/58addedbf386ad8c80f2305fd74eaf]
Jun-17 17:18:50.409 [Actor Thread 7] DEBUG nextflow.Session - <<< barrier arrive (process: refseq_masher_reads)
Jun-17 17:18:50.414 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:50.415 [Task submitter] INFO  nextflow.Session - [96/51b70b] Submitted process > find_GCF (2)
Jun-17 17:18:50.449 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 5; name: find_GCF (1); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/48/8649d079d4e6d184b056758f0c42c2]
Jun-17 17:18:50.464 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 6; name: find_GCF (2); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/96/51b70ba96930ce5e57873c8029729a]
Jun-17 17:18:50.466 [Actor Thread 2] DEBUG nextflow.Session - <<< barrier arrive (process: find_GCF)
Jun-17 17:18:50.482 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:50.482 [Task submitter] INFO  nextflow.Session - [d5/5cff73] Submitted process > get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna)
Jun-17 17:18:50.487 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:18:50.487 [Task submitter] INFO  nextflow.Session - [70/0e8f19] Submitted process > get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna)
Jun-17 17:19:07.986 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 7; name: get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/d5/5cff731d4032595a8a574fcd67ef26]
Jun-17 17:19:07.987 [Task monitor] DEBUG nextflow.processor.TaskProcessor - Process `get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna)` is unable to find [UnixPath]: `/usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/d5/5cff731d4032595a8a574fcd67ef26/debug_1005.csv` (pattern: `debug_1005.csv`)
Jun-17 17:19:08.004 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna)'

Caused by:
  Missing output file(s) `debug_1005.csv` expected by process `get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna)`

Command executed:

  typeset -i count=0
  for gcf in `cat ${tophits}`; do
    if [ $count -gt 50 ]; then break;
    else
      HITREF=`\ls /media/deolivl/QIB_deolivl/bigdata/noplasmids/${gcf}*`
      if test x"${HITREF}" != x""; then
        echo ${HITREF} >> debug_1005.csv
        count=$count+1
        bwa index ${HITREF}
        bwa mem ${HITREF} sim_GCF_003574945.1_ASM357494v1_genomic.fna_1005_1.fq sim_GCF_003574945.1_ASM357494v1_genomic.fna_1005_2.fq | samtools view -S -b - | samtools sort > sort.bam
        bamcov -H sort.bam >> scores.csv
      fi  # if HITREF exists
    fi    # if count == 10
  done
  bwa index GCF_003574945.1_ASM357494v1_genomic.fna.gz
  bwa mem GCF_003574945.1_ASM357494v1_genomic.fna.gz sim_GCF_003574945.1_ASM357494v1_genomic.fna_1005_1.fq sim_GCF_003574945.1_ASM357494v1_genomic.fna_1005_2.fq | samtools view -S -b - | samtools sort > sort.bam
  bamcov -H sort.bam >> scores.csv
  score.py scores.csv > final_scores_GCF_003574945.1_ASM357494v1_genomic.fna_1005.csv

Command exit status:
  0

Command output:
  (empty)

Command error:
  .command.sh: line 3: tophits: unbound variable
  [bwa_index] Pack FASTA... 0.03 sec
  [bwa_index] Construct BWT for the packed sequence...
  [bwa_index] 0.39 seconds elapse.
  [bwa_index] Update BWT... 0.01 sec
  [bwa_index] Pack forward-only FASTA... 0.01 sec
  [bwa_index] Construct SA from BWT and Occ... 0.13 sec
  [main] Version: 0.7.17-r1188
  [main] CMD: bwa index GCF_003574945.1_ASM357494v1_genomic.fna.gz
  [main] Real time: 0.640 sec; CPU: 0.569 sec
  [M::bwa_idx_load_from_disk] read 0 ALT contigs
  [M::process] read 66668 sequences (10000200 bp)...
  [M::process] read 66668 sequences (10000200 bp)...
  [M::mem_pestat] # candidate unique pairs for (FF, FR, RF, RR): (0, 31161, 0, 0)
  [M::mem_pestat] skip orientation FF as there are not enough pairs
  [M::mem_pestat] analyzing insert size distribution for orientation FR...
  [M::mem_pestat] (25, 50, 75) percentile: (465, 499, 532)
  [M::mem_pestat] low and high boundaries for computing mean and std.dev: (331, 666)
  [M::mem_pestat] mean and std.dev: (498.67, 49.74)
  [M::mem_pestat] low and high boundaries for proper pairs: (264, 733)
  [M::mem_pestat] skip orientation RF as there are not enough pairs
  [M::mem_pestat] skip orientation RR as there are not enough pairs
  [M::mem_process_seqs] Processed 66668 reads in 5.027 CPU sec, 4.983 real sec
  [M::process] read 66664 sequences (9999600 bp)...
  [M::mem_pestat] # candidate unique pairs for (FF, FR, RF, RR): (0, 31112, 0, 0)
  [M::mem_pestat] skip orientation FF as there are not enough pairs
  [M::mem_pestat] analyzing insert size distribution for orientation FR...
  [M::mem_pestat] (25, 50, 75) percentile: (465, 499, 533)
  [M::mem_pestat] low and high boundaries for computing mean and std.dev: (329, 669)
  [M::mem_pestat] mean and std.dev: (499.29, 50.13)
  [M::mem_pestat] low and high boundaries for proper pairs: (261, 737)
  [M::mem_pestat] skip orientation RF as there are not enough pairs
  [M::mem_pestat] skip orientation RR as there are not enough pairs
  [M::mem_process_seqs] Processed 66668 reads in 5.119 CPU sec, 5.029 real sec
  [M::mem_pestat] # candidate unique pairs for (FF, FR, RF, RR): (0, 31014, 0, 0)
  [M::mem_pestat] skip orientation FF as there are not enough pairs
  [M::mem_pestat] analyzing insert size distribution for orientation FR...
  [M::mem_pestat] (25, 50, 75) percentile: (465, 499, 533)
  [M::mem_pestat] low and high boundaries for computing mean and std.dev: (329, 669)
  [M::mem_pestat] mean and std.dev: (498.81, 49.79)
  [M::mem_pestat] low and high boundaries for proper pairs: (261, 737)
  [M::mem_pestat] skip orientation RF as there are not enough pairs
  [M::mem_pestat] skip orientation RR as there are not enough pairs
  [M::mem_process_seqs] Processed 66664 reads in 5.090 CPU sec, 5.042 real sec
  [main] Version: 0.7.17-r1188
  [main] CMD: bwa mem GCF_003574945.1_ASM357494v1_genomic.fna.gz sim_GCF_003574945.1_ASM357494v1_genomic.fna_1005_1.fq sim_GCF_003574945.1_ASM357494v1_genomic.fna_1005_2.fq
  [main] Real time: 15.371 sec; CPU: 15.321 sec

Work dir:
  /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/d5/5cff731d4032595a8a574fcd67ef26

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`
Jun-17 17:19:08.008 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Missing output file(s) `debug_1005.csv` expected by process `get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna)`
Jun-17 17:19:08.032 [main] DEBUG nextflow.Session - Session await > all process finished
Jun-17 17:19:08.032 [main] DEBUG nextflow.Session - Session await > all barriers passed
Jun-17 17:19:08.032 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 8; name: get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/70/0e8f1997d4feafc45896cccfbf67f2]
Jun-17 17:19:08.034 [Task monitor] DEBUG nextflow.processor.TaskProcessor - Process `get_coverage (GCF_003574945.1_ASM357494v1_genomic.fna)` is unable to find [UnixPath]: `/usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/70/0e8f1997d4feafc45896cccfbf67f2/debug_1004.csv` (pattern: `debug_1004.csv`)
Jun-17 17:19:08.034 [Actor Thread 7] DEBUG nextflow.Session - <<< barrier arrive (process: get_coverage)
Jun-17 17:19:08.035 [Task monitor] DEBUG n.processor.TaskPollingMonitor - <<< barrier arrives (monitor: local)
Jun-17 17:19:08.045 [main] DEBUG nextflow.trace.StatsObserver - Workflow completed > WorkflowStats[succeedCount=6; failedCount=2; ignoredCount=0; cachedCount=0; succeedDuration=4m 24s; failedDuration=34.9s; cachedDuration=0ms]
Jun-17 17:19:08.216 [main] DEBUG nextflow.CacheDB - Closing CacheDB done
Jun-17 17:19:08.230 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
