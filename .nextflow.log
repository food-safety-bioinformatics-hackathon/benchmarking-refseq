Jun-17 17:24:53.327 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf --sim 2
Jun-17 17:24:53.442 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 19.04.1
Jun-17 17:24:53.454 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [zen_watson] - revision: d4d6b71c0e
Jun-17 17:24:53.469 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/nextflow.config
Jun-17 17:24:53.470 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/nextflow.config
Jun-17 17:24:53.501 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Jun-17 17:24:53.910 [main] DEBUG nextflow.Session - Session uuid: 8b1e545e-7dc2-42d2-acb4-06c15c053509
Jun-17 17:24:53.911 [main] DEBUG nextflow.Session - Run name: zen_watson
Jun-17 17:24:53.911 [main] DEBUG nextflow.Session - Executor pool size: 8
Jun-17 17:24:53.938 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 19.04.1 build 5072
  Modified: 03-05-2019 12:29 UTC (13:29 BST)
  System: Linux 4.15.0-51-generic
  Runtime: Groovy 2.5.6 on OpenJDK 64-Bit Server VM 11.0.1+13-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 2770@n114312.nbi.ac.uk [127.0.1.1]
  CPUs: 8 - Mem: 15.5 GB (5.9 GB) - Swap: 91 MB (91 MB)
Jun-17 17:24:53.956 [main] DEBUG nextflow.Session - Work-dir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work [ext2/ext3]
Jun-17 17:24:54.057 [main] DEBUG nextflow.Session - Session start invoked
Jun-17 17:24:54.061 [main] DEBUG nextflow.processor.TaskDispatcher - Dispatcher > start
Jun-17 17:24:54.064 [main] DEBUG nextflow.script.ScriptRunner - > Script parsing
Jun-17 17:24:54.366 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Jun-17 17:24:54.397 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: /media/deolivl/QIB_deolivl/bigdata/noplasmids/; pattern: *.gz; options: [:]
Jun-17 17:24:54.542 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:24:54.542 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:24:54.549 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:24:54.551 [main] INFO  nextflow.executor.Executor - [warm up] executor > local
Jun-17 17:24:54.555 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=8; memory=15.5 GB; capacity=8; pollInterval=100ms; dumpInterval=5m
Jun-17 17:24:54.559 [main] DEBUG nextflow.processor.TaskDispatcher - Starting monitor: LocalPollingMonitor
Jun-17 17:24:54.560 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Jun-17 17:24:54.563 [main] DEBUG nextflow.executor.Executor - Invoke register for executor: local
Jun-17 17:24:54.604 [main] DEBUG nextflow.Session - >>> barrier register (process: simulation)
Jun-17 17:24:54.611 [main] DEBUG nextflow.processor.TaskProcessor - Creating *combiner* operator for each param(s) at index(es): [1]
Jun-17 17:24:54.623 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > simulation -- maxForks: 8
Jun-17 17:24:54.650 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:24:54.651 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:24:54.651 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:24:54.652 [main] DEBUG nextflow.Session - >>> barrier register (process: refseq_masher_reads)
Jun-17 17:24:54.653 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > refseq_masher_reads -- maxForks: 8
Jun-17 17:24:54.658 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:24:54.658 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:24:54.658 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:24:54.659 [main] DEBUG nextflow.Session - >>> barrier register (process: find_GCF)
Jun-17 17:24:54.659 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > find_GCF -- maxForks: 8
Jun-17 17:24:54.666 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Jun-17 17:24:54.666 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Jun-17 17:24:54.666 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Jun-17 17:24:54.668 [main] DEBUG nextflow.Session - >>> barrier register (process: get_coverage)
Jun-17 17:24:54.678 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > get_coverage -- maxForks: 8
Jun-17 17:24:54.681 [main] DEBUG nextflow.script.ScriptRunner - > Await termination 
Jun-17 17:24:54.681 [main] DEBUG nextflow.Session - Session await
Jun-17 17:24:54.817 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:24:54.822 [Task submitter] INFO  nextflow.Session - [fe/7e40e6] Submitted process > simulation (1005)
Jun-17 17:24:54.837 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:24:54.837 [Task submitter] INFO  nextflow.Session - [27/8ea2b6] Submitted process > simulation (1004)
Jun-17 17:24:55.392 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: simulation (1004); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/27/8ea2b69f5e0932426b080088cecd8e]
Jun-17 17:24:55.409 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:24:55.409 [Task submitter] INFO  nextflow.Session - [cd/092387] Submitted process > refseq_masher_reads (1)
Jun-17 17:24:55.487 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 2; name: simulation (1005); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/fe/7e40e673e980c1c24d7e1238fdbc9b]
Jun-17 17:24:55.494 [Actor Thread 2] DEBUG nextflow.Session - <<< barrier arrive (process: simulation)
Jun-17 17:24:55.499 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:24:55.499 [Task submitter] INFO  nextflow.Session - [1a/644a83] Submitted process > refseq_masher_reads (2)
Jun-17 17:25:28.735 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 4; name: refseq_masher_reads (2); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/1a/644a8367c4a82f06060a57103bfa31]
Jun-17 17:25:28.744 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:25:28.744 [Task submitter] INFO  nextflow.Session - [7d/e4f492] Submitted process > find_GCF (1)
Jun-17 17:25:28.786 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 5; name: find_GCF (1); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/7d/e4f49284f9fb7c8c5491057a175f4c]
Jun-17 17:25:28.827 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:25:28.827 [Task submitter] INFO  nextflow.Session - [ab/a539e2] Submitted process > get_coverage (GCF_000835285.1_ASM83528v1_genomic.fna)
Jun-17 17:25:28.873 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 3; name: refseq_masher_reads (1); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/cd/092387c7179a67f0e2ecc304c074d6]
Jun-17 17:25:28.875 [Actor Thread 8] DEBUG nextflow.Session - <<< barrier arrive (process: refseq_masher_reads)
Jun-17 17:25:28.879 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:25:28.879 [Task submitter] INFO  nextflow.Session - [a2/d27712] Submitted process > find_GCF (2)
Jun-17 17:25:28.923 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 7; name: find_GCF (2); status: COMPLETED; exit: 0; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/a2/d27712bbb26b2d4f28f63ec054a3b3]
Jun-17 17:25:28.925 [Actor Thread 6] DEBUG nextflow.Session - <<< barrier arrive (process: find_GCF)
Jun-17 17:25:28.933 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Jun-17 17:25:28.933 [Task submitter] INFO  nextflow.Session - [25/3c8fa5] Submitted process > get_coverage (GCF_000835285.1_ASM83528v1_genomic.fna)
Jun-17 17:25:29.310 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 6; name: get_coverage (GCF_000835285.1_ASM83528v1_genomic.fna); status: COMPLETED; exit: 1; error: -; workDir: /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/ab/a539e29c601d7dc51f94fc40e1ec4a]
Jun-17 17:25:29.368 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'get_coverage (GCF_000835285.1_ASM83528v1_genomic.fna)'

Caused by:
  Process `get_coverage (GCF_000835285.1_ASM83528v1_genomic.fna)` terminated with an error exit status (1)

Command executed:

  typeset -i count=0
  for gcf in `cat refseq_masher_reads_sim_GCF_000835285.1_ASM83528v1_genomic.fna_1005_1_1005_hits.tsv`; do
    if [ $count -gt 50 ]; then break;
    else
      HITREF=`\ls /media/deolivl/QIB_deolivl/bigdata/noplasmids/${gcf}*`
      if test x"${HITREF}" != x""; then
        echo ${HITREF} >> debug_1004.csv
        count=$count+1
        bwa index ${HITREF}
        bwa mem ${HITREF} sim_GCF_000835285.1_ASM83528v1_genomic.fna_1004_1.fq sim_GCF_000835285.1_ASM83528v1_genomic.fna_1004_2.fq | samtools view -S -b - | samtools sort > sort.bam
        bamcov -H sort.bam >> scores.csv
      fi  # if HITREF exists
    fi    # if count == 10
  done
  bwa index GCF_000835285.1_ASM83528v1_genomic.fna.gz
  bwa mem GCF_000835285.1_ASM83528v1_genomic.fna.gz sim_GCF_000835285.1_ASM83528v1_genomic.fna_1004_1.fq sim_GCF_000835285.1_ASM83528v1_genomic.fna_1004_2.fq | samtools view -S -b - | samtools sort > sort.bam
  bamcov -H sort.bam >> scores.csv
  score.py scores.csv > final_scores_GCF_000835285.1_ASM83528v1_genomic.fna_1004.csv

Command exit status:
  1

Command output:
  (empty)

Command error:
  [bwa_index] Pack FASTA... 0.03 sec
  [bwa_index] Construct BWT for the packed sequence...
  [fseek] Invalid argument

Work dir:
  /usr/users/QIB_fr005/deolivl/Academic/Quadram/014.hackaton2019/benchmarking-refseq/work/ab/a539e29c601d7dc51f94fc40e1ec4a

Tip: when you have fixed the problem you can continue the execution appending to the nextflow command line the option `-resume`
Jun-17 17:25:29.380 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `get_coverage (GCF_000835285.1_ASM83528v1_genomic.fna)` terminated with an error exit status (1)
Jun-17 17:25:29.441 [main] DEBUG nextflow.Session - Session await > all process finished
Jun-17 17:25:29.443 [main] DEBUG nextflow.Session - Session await > all barriers passed
Jun-17 17:25:29.443 [Task monitor] DEBUG n.processor.TaskPollingMonitor - <<< barrier arrives (monitor: local)
Jun-17 17:25:29.451 [main] WARN  n.processor.TaskPollingMonitor - Killing pending tasks (1)
Jun-17 17:25:29.464 [main] DEBUG nextflow.trace.StatsObserver - Workflow completed > WorkflowStats[succeedCount=6; failedCount=2; ignoredCount=0; cachedCount=0; succeedDuration=4m 27s; failedDuration=433ms; cachedDuration=0ms]
Jun-17 17:25:29.587 [main] DEBUG nextflow.CacheDB - Closing CacheDB done
Jun-17 17:25:29.604 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
